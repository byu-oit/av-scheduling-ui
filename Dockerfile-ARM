FROM resin/raspberrypi3-buildpack-deps:jessie

ENV NODE_VERSION 8.0.0

RUN curl -SLO "http://resin-packages.s3.amazonaws.com/node/v$NODE_VERSION/node-v$NODE_VERSION-linux-armv7hf.tar.gz" \
	&& echo "fd3633733b4fc82b97a1a87c4fb67b1b7a3654fb9f65e2b96dbbba29f97c629f  node-v8.0.0-linux-armv7hf.tar.gz" | sha256sum -c - \
	&& tar -xzf "node-v$NODE_VERSION-linux-armv7hf.tar.gz" -C /usr/local --strip-components=1 \
	&& rm "node-v$NODE_VERSION-linux-armv7hf.tar.gz" \
	&& npm config set unsafe-perm true -g --unsafe-perm \
	&& rm -rf /tmp/*

RUN mkdir -p /web
WORKDIR /web
RUN git clone https://github.com/byu-oit/av-scheduling-ui.git

WORKDIR /web/av-scheduling-ui/web

RUN npm install

EXPOSE 8011

CMD ng serve --port 8011
